AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: 'pullreminders2

  Sample SAM Template for pullreminders2

  '
Globals:
  Function:
    Timeout: 3
Resources:
  HelloWorldFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: s3://pullreminders2/91159c8427fd95ca4cd16511007f5da2
      Handler: handlers.hello_world.lambda_handler
      Runtime: python3.7
      Events:
        HelloWorld:
          Type: Api
          Properties:
            Path: /hello
            Method: get
  CommandsFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: s3://pullreminders2/8942b8789ec2456fbaba39efb51306a5
      Handler: handlers.commands.lambda_handler
      Runtime: python3.7
      Events:
        HelloWorld:
          Type: Api
          Properties:
            Path: /commands
            Method: post
  OauthCallbackFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: s3://pullreminders2/1b09072a2b229fa4d2a87e7a69e9506c
      Handler: handlers.oauth_callback.lambda_handler
      Runtime: python3.7
      Events:
        HelloWorld:
          Type: Api
          Properties:
            Path: /oauth/callback
            Method: get
  GithubWebhookFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: s3://pullreminders2/32807dc2d20dd0cc0225c377c66827ad
      Handler: handlers.github_webhook.lambda_handler
      Runtime: python3.7
      Events:
        HelloWorld:
          Type: Api
          Properties:
            Path: /webhooks/github
            Method: post
Outputs:
  HelloWorldApi:
    Description: API Gateway endpoint URL for Prod stage for Hello World function
    Value:
      Fn::Sub: https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/hello/
  HelloWorldFunction:
    Description: Hello World Lambda Function ARN
    Value:
      Fn::GetAtt:
      - HelloWorldFunction
      - Arn
  HelloWorldFunctionIamRole:
    Description: Implicit IAM Role created for Hello World function
    Value:
      Fn::GetAtt:
      - HelloWorldFunctionRole
      - Arn
  CommandsApi:
    Description: API Gateway endpoint URL for Prod stage for commands function
    Value:
      Fn::Sub: https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/commands/
  CommandsFunction:
    Description: Hello World commands ARN
    Value:
      Fn::GetAtt:
      - CommandsFunction
      - Arn
  CommandsFunctionIamRole:
    Description: Implicit IAM Role created for commands function
    Value:
      Fn::GetAtt:
      - CommandsFunctionRole
      - Arn
  OauthCallbackApi:
    Description: API Gateway endpoint URL for Prod stage for oauth callback function
    Value:
      Fn::Sub: https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/oauth/callback
  OauthCallbackFunction:
    Description: Hello World commands ARN
    Value:
      Fn::GetAtt:
      - OauthCallbackFunction
      - Arn
  OauthCallbackFunctionIamRole:
    Description: Implicit IAM Role created for commands function
    Value:
      Fn::GetAtt:
      - OauthCallbackFunctionRole
      - Arn
  GithubWebhookApi:
    Description: API Gateway endpoint URL for Prod stage for pull requests webhooks
      function
    Value:
      Fn::Sub: https://${ServerlessRestApi}.execute-api.${AWS::Region}.amazonaws.com/Prod/webhooks/github
  GithubWebhookFunction:
    Description: Hello World commands ARN
    Value:
      Fn::GetAtt:
      - GithubWebhookFunction
      - Arn
  GithubWebhookFunctionIamRole:
    Description: Implicit IAM Role created for commands function
    Value:
      Fn::GetAtt:
      - GithubWebhookFunctionRole
      - Arn
